{
    "key_": "nndeploy.dag.Graph",
    "name_": "Face_Swap_GAN_Segment",
    "developer_": "Always",
    "source_": "https://github.com/hacksider/Deep-Live-Cam,https://huggingface.co/briaai/RMBG-1.4",
    "desc_": "Face swap workflow integrating face swap, GAN and Segmentation",
    "device_type_": "kDeviceTypeCodeCpu:0",
    "is_dynamic_input_": false,
    "inputs_": [],
    "is_dynamic_output_": false,
    "outputs_": [],
    "is_graph_": true,
    "parallel_type_": "kParallelTypeNone",
    "is_inner_": false,
    "node_type_": "Intermediate",
    "is_time_profile_": false,
    "is_debug_": false,
    "is_external_stream_": false,
    "is_graph_node_share_stream_": true,
    "queue_max_size_": 16,
    "is_loop_max_flag_": true,
    "loop_count_": -1,
    "image_url_": [
        "template[http,modelscope]@https://template.cn/template.jpg"
    ],
    "video_url_": [
        "template[http,modelscope]@https://template.cn/template.mp4"
    ],
    "audio_url_": [
        "template[http,modelscope]@https://template.cn/template.mp3"
    ],
    "model_url_": [
        "modelscope@nndeploy/nndeploy:face_swap/inswapper_128_fp16.onnx",
        "modelscope@nndeploy/nndeploy:face_swap/GFPGANv1.4.pth",
        "modelscope@nndeploy/nndeploy:segment/RMBGV1.4.slim.onnx"
    ],
    "other_url_": [
        "template[http,modelscope]@https://template.cn/template.txt"
    ],
    "node_repository_": [
        {
            "key_": "nndeploy.face.InsightFaceAnalysis",
            "name_": "InsightFaceAnalysis_17",
            "desc_": "InsightFace Analysis: get face analysis from image",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "OpenCvImageDecode_23@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "InsightFaceAnalysis_17@output_0",
                    "type_": "list[Face]"
                }
            ],
            "node_type_": "Intermediate",
            "insightface_name_": "buffalo_l",
            "providers_": [
                "CPUExecutionProvider"
            ],
            "is_one_face_": true,
            "ctx_id": 0,
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy.face.InsightFaceSwapper",
            "name_": "InsightFaceSwapper_19",
            "desc_": "InsightFace Swapper: swap face from image",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "InsightFaceAnalysis_17@output_0",
                    "type_": "list[Face]"
                },
                {
                    "desc_": "input_1",
                    "name_": "InsightFaceAnalysis_25@output_0",
                    "type_": "list[Face]"
                },
                {
                    "desc_": "input_2",
                    "name_": "OpenCvImageDecode_24@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "InsightFaceSwapper_19@output_0",
                    "type_": "ndarray"
                }
            ],
            "node_type_": "Intermediate",
            "mouth_mask_": false,
            "show_mouth_mask_box_": false,
            "mask_down_size_": 0.5,
            "mask_feather_ratio_": 8,
            "mask_size_": 1,
            "model_path_": "resources/models/face_swap/inswapper_128_fp16.onnx",
            "providers_": [
                "CPUExecutionProvider"
            ],
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy.gan.GFPGAN",
            "name_": "GFPGAN_20",
            "desc_": "GFPGAN: Make faces clearer",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "InsightFaceSwapper_19@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "GFPGAN_20@output_0",
                    "type_": "ndarray"
                }
            ],
            "node_type_": "Intermediate",
            "model_path_": "resources/models/face_swap/GFPGANv1.4.pth",
            "upscale_": 1,
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::preprocess::CvtResizeNormTrans",
            "name_": "CvtResizeNormTrans_12",
            "desc_": "cv::Mat to device::Tensor[cvtcolor->resize->normalize->transpose]",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "GFPGAN_20@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "CvtResizeNormTrans_12@output_0",
                    "type_": "Tensor"
                }
            ],
            "node_type_": "Intermediate",
            "param_": {
                "src_pixel_type_": "kPixelTypeBGR",
                "dst_pixel_type_": "kPixelTypeRGB",
                "interp_type_": "kInterpTypeLinear",
                "h_": 1024,
                "w_": 1024,
                "data_type_": "kDataTypeCodeFp32",
                "data_format_": "kDataFormatNCHW",
                "normalize_": true,
                "scale_": [
                    0.003921568859368563,
                    0.003921568859368563,
                    0.003921568859368563,
                    0.003921568859368563
                ],
                "mean_": [
                    0.5,
                    0.5,
                    0.5,
                    0.5
                ],
                "std_": [
                    1,
                    1,
                    1,
                    1
                ]
            },
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::infer::Infer",
            "name_": "Infer_13",
            "desc_": "Universal Inference Node - Enables cross-platform model deployment with multiple inference backends while maintaining native performance",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": true,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "CvtResizeNormTrans_12@output_0",
                    "type_": "Tensor"
                }
            ],
            "is_dynamic_output_": true,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "Infer_13@output_0",
                    "type_": "Tensor"
                }
            ],
            "node_type_": "Intermediate",
            "type_": "kInferenceTypeOnnxRuntime",
            "param_": {
                "model_type_": "kModelTypeOnnx",
                "is_path_": true,
                "model_value_": [
                    "resources/models/segment/RMBGV1.4.slim.onnx"
                ],
                "external_model_data_": [
                    ""
                ],
                "device_type_": "kDeviceTypeCodeCpu:0",
                "num_thread_": 8,
                "gpu_tune_kernel_": 1,
                "input_num_": 1,
                "input_name_": [
                    ""
                ],
                "input_shape_": [
                    [
                        -1,
                        -1,
                        -1,
                        -1
                    ]
                ],
                "output_num_": 1,
                "output_name_": [
                    ""
                ],
                "encrypt_type_": "kEncryptTypeNone",
                "license_": "",
                "share_memory_mode_": "kShareMemoryTypeNoShare",
                "precision_type_": "kPrecisionTypeFp32",
                "power_type_": "kPowerTypeNormal",
                "is_dynamic_shape_": false,
                "min_shape_": {
                    "input_0": [
                        -1,
                        -1,
                        -1,
                        -1
                    ]
                },
                "opt_shape_": {
                    "input_0": [
                        -1,
                        -1,
                        -1,
                        -1
                    ]
                },
                "max_shape_": {
                    "input_0": [
                        -1,
                        -1,
                        -1,
                        -1
                    ]
                },
                "parallel_type_": "kParallelTypeNone",
                "worker_num_": 1
            },
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::segment::RMBGPostProcess",
            "name_": "RMBGPostProcess_14",
            "desc_": "Segment RMBG postprocess[device::Tensor->SegmentResult]",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "GFPGAN_20@output_0",
                    "type_": "ndarray"
                },
                {
                    "desc_": "input_1",
                    "name_": "Infer_13@output_0",
                    "type_": "Tensor"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "RMBGPostProcess_14@output_0",
                    "type_": "SegmentResult"
                }
            ],
            "node_type_": "Intermediate",
            "param_": {
                "version": 14
            },
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::segment::DrawMask",
            "name_": "DrawMask_15",
            "desc_": "Draw segmentation mask on input cv::Mat image based on segmentation results[cv::Mat->cv::Mat]",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "GFPGAN_20@output_0",
                    "type_": "ndarray"
                },
                {
                    "desc_": "input_1",
                    "name_": "RMBGPostProcess_14@output_0",
                    "type_": "SegmentResult"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "DrawMask_15@output_0",
                    "type_": "ndarray"
                }
            ],
            "node_type_": "Intermediate",
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::codec::OpenCvImageEncode",
            "name_": "OpenCvImageEncode_22",
            "developer_": "",
            "source_": "",
            "desc_": "Encode image using OpenCV, from cv::Mat to image file, supports common image formats",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "InsightFaceSwapper_19@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [],
            "node_type_": "Output",
            "path_": "resources/images/result.face_swap.png",
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::codec::OpenCvImageDecode",
            "name_": "OpenCvImageDecode_23",
            "developer_": "",
            "source_": "",
            "desc_": "Decode image using OpenCV, from image path to cv::Mat, default color space is BGR",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "version_": "1.0.0",
            "required_params_": [
                "path_"
            ],
            "ui_params_": [],
            "is_dynamic_input_": false,
            "inputs_": [],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "OpenCvImageDecode_23@output_0",
                    "type_": "ndarray"
                }
            ],
            "node_type_": "Input",
            "io_type_": "Image",
            "path_": "resources/template/nndeploy-workflow/creative/musk.jpg",
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::codec::OpenCvImageDecode",
            "name_": "OpenCvImageDecode_24",
            "developer_": "",
            "source_": "",
            "desc_": "Decode image using OpenCV, from image path to cv::Mat, default color space is BGR",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "version_": "1.0.0",
            "required_params_": [
                "path_"
            ],
            "ui_params_": [],
            "is_dynamic_input_": false,
            "inputs_": [],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "OpenCvImageDecode_24@output_0",
                    "type_": "ndarray"
                }
            ],
            "node_type_": "Input",
            "io_type_": "Image",
            "path_": "resources/template/nndeploy-workflow/creative/speed.png",
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy.face.InsightFaceAnalysis",
            "name_": "InsightFaceAnalysis_25",
            "desc_": "InsightFace Analysis: get face analysis from image",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "OpenCvImageDecode_24@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [
                {
                    "desc_": "output_0",
                    "name_": "InsightFaceAnalysis_25@output_0",
                    "type_": "list[Face]"
                }
            ],
            "node_type_": "Intermediate",
            "insightface_name_": "buffalo_l",
            "providers_": [
                "CPUExecutionProvider"
            ],
            "is_one_face_": true,
            "ctx_id": 0,
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::codec::OpenCvImageEncode",
            "name_": "OpenCvImageEncode_27",
            "developer_": "",
            "source_": "",
            "desc_": "Encode image using OpenCV, from cv::Mat to image file, supports common image formats",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "version_": "1.0.0",
            "required_params_": [
                "path_"
            ],
            "ui_params_": [],
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "DrawMask_15@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [],
            "node_type_": "Output",
            "io_type_": "Image",
            "path_": "resources/images/result.face_swap_gan_seg.png",
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        },
        {
            "key_": "nndeploy::codec::OpenCvImageEncode",
            "name_": "OpenCvImageEncode_26",
            "developer_": "",
            "source_": "",
            "desc_": "Encode image using OpenCV, from cv::Mat to image file, supports common image formats",
            "device_type_": "kDeviceTypeCodeCpu:0",
            "version_": "1.0.0",
            "required_params_": [
                "path_"
            ],
            "ui_params_": [],
            "is_dynamic_input_": false,
            "inputs_": [
                {
                    "desc_": "input_0",
                    "name_": "GFPGAN_20@output_0",
                    "type_": "ndarray"
                }
            ],
            "is_dynamic_output_": false,
            "outputs_": [],
            "node_type_": "Output",
            "io_type_": "Image",
            "path_": "resources/images/result.face_swap_gan.png",
            "size": {
                "width": 200,
                "height": 80
            },
            "node_repository_": []
        }
    ],
    "nndeploy_ui_layout": {
        "layout": {
            "InsightFaceAnalysis_17": {
                "position": {
                    "x": 400,
                    "y": 52.19999999999999
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "InsightFaceSwapper_19": {
                "position": {
                    "x": 700,
                    "y": 228.45
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "GFPGAN_20": {
                "position": {
                    "x": 1000,
                    "y": 115.82499999999999
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "CvtResizeNormTrans_12": {
                "position": {
                    "x": 1300,
                    "y": 254.50000000000006
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "Infer_13": {
                "position": {
                    "x": 1600,
                    "y": 254.50000000000006
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "RMBGPostProcess_14": {
                "position": {
                    "x": 1900,
                    "y": 197.375
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "DrawMask_15": {
                "position": {
                    "x": 2200,
                    "y": 151.14999999999998
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "OpenCvImageEncode_22": {
                "position": {
                    "x": 1000,
                    "y": 290.725
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "OpenCvImageDecode_23": {
                "position": {
                    "x": 100,
                    "y": 0
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "OpenCvImageDecode_24": {
                "position": {
                    "x": 100,
                    "y": 279.29999999999995
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "InsightFaceAnalysis_25": {
                "position": {
                    "x": 400,
                    "y": 342.65
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "OpenCvImageEncode_27": {
                "position": {
                    "x": 2500,
                    "y": 159.04999999999995
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            },
            "OpenCvImageEncode_26": {
                "position": {
                    "x": 1300,
                    "y": 0
                },
                "size": {
                    "width": 200,
                    "height": 80
                },
                "expanded": true
            }
        },
        "groups": []
    }
}